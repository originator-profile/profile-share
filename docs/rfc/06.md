# Key States and Transitions - Editor's Draft

:::note
本文書は今後定義されるべき項目を含んでいます。
コミュニティ内での議論と改稿を通じて、これらの項目は確定され、明確に定義されることが求められます。
:::

## 概要

本文書では、鍵が取り得る状態とその遷移を説明します。

## 範囲

- Originator Profile 発行プロセスは本文書の範囲外です。

## 用語

- [JSON Web Key (JWK)](https://www.rfc-editor.org/rfc/rfc7517.html)
- [SD-JWT VC](https://datatracker.ietf.org/doc/draft-ietf-oauth-sd-jwt-vc/)

## 鍵の状態

_本セクションは参考情報です。_

- active or not

## 鍵の失効プロセス

_本セクションは参考情報です。_

JWT VC Issuer Metadata を使用して判定を行う具体例を次に示します。

1. 発行者は JWT VC Issuer Metadata の `jwks` プロパティに有効な鍵Xを提供
2. 発行者は新たに有効化する鍵Yを追加
3. 発行者は鍵Yを発行し、提示者はそれを新たに提示
4. 鍵の失効: 発行者は鍵Xを削除
5. 検証者は鍵Xに対応する署名鍵で署名された SD-JWT を無効と判定し、検証処理を拒否

JWT Confirmation Methods jwk または jkt を使用して判定を行う例を次に示します。

1. 検証者は何らかの手段で失効対象の鍵の一覧を取得
2. 検証者は失効対象の鍵で署名された SD-JWT を無効と判定し、検証処理を拒否

JWT Confirmation Methods jku (JWK Set URL) を使用して判定を行う具体例を次に示します。

1. 発行者は jku で間接参照される先に有効な鍵Xを提供
2. 発行者は新たに有効化する鍵Yを追加
3. 発行者は鍵Yで発行し、提示者はそれを新たに提示
4. 鍵の失効: 発行者は鍵Xを削除
5. 検証者は鍵Xに対応する署名鍵で署名された SD-JWT を無効と判定し、検証処理を拒否

:::note
いずれも実装者はプライバシー上のリスクを踏まえて実装しなければなりません。
:::
