# Website Metadata Schema - Editor's Draft

## 概要

本文書では Originator Profile 技術研究組合の開発するアプリケーションで使用されるウェブサイトメタデータの構造を説明します。

## 用語

本文書に説明のない用語については、用語 RFC 文書を参照してください。

- [SD-JWT VC Type Metadata](https://www.ietf.org/archive/id/draft-ietf-oauth-sd-jwt-vc-04.html#name-type-metadata)
- Web Assertion (WA)

## Website Metadata の形式

### クレーム

#### `vct`

必ず `https://originator-profile.org/website` でなければなりません (MUST)。

#### `target`

Web Assertion に登録済みのクレーム。含めてはいけません (MUST NOT) 。

#### `allowed_urls`

Web Assertion に登録済みのクレーム。含めてはいけません (MUST NOT)。

#### `allowed_origins`

REQUIRED. Web Assertion に登録済みのクレーム。

### サブスキーマ

#### `website`

ウェブサイトを表す JSON Object です。JSON Object は次のプロパティを含みます。

- `title`: REQUIRED. コンテンツのタイトル。
- `description`: REQUIRED. コンテンツの説明（プレーンテキスト）。
- `image`: OPTIONAL. コンテンツの画像の URL。コンテンツに強い関連をもつ画像があるならば、その画像を指定するべきです (RECOMMENDED)。
- `image#integrity`: OPTIONAL. コンテンツの画像のハッシュ値を指定します。ハッシュ値の形式は [Subresource Integrity セクション 3.1](https://www.w3.org/TR/SRI/#framework) の Integrity metadata でなければなりません (MUST)。
- `locale`: REQUIRED. Web コンテンツのロケール。

### SD-JWT VC Type Metadata

_本セクションは参考情報です。_

Web Assertion の発行者は、このスキーマを使ってウェブサイト用の Web Assertion を発行することができます (MAY)。
新しいスキーマを定義して、そのスキーマに基づく Web Assertion を発行してもよい (MAY) ですが、そのスキーマも Web Assertion の仕様に準拠している必要があります (MUST)。

SD-JWT VC Type Metadata の具体例を次に示します。

```json
{
  "vct": "https://originator-profile.org/website",
  "title": "Website Metadata",
  "description": "A credential format to describe and assert the website and its reliability and authenticity",
  "schema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Website Metadata",
    "type": "object",
    "additionalProperties": true,
    "$defs": {
      "allowed_origins": {
        "type": "array",
        "items": {
          "type": "string",
          "format": "uri"
        }
      },
      "assertion": {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "allowed_origins": { "$ref": "#/$defs/allowed_origins" }
        },
        "required": ["allowed_origins"]
      },
      "website": {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "image": {
            "type": "string",
            "format": "uri"
          },
          "image#integrity": {
            "type": "string"
          },
          "locale": {
            "type": "string"
          }
        },
        "required": ["title", "description", "locale"]
      }
    },
    "allOf": [{ "$ref": "#/$defs/assertion" }, { "$ref": "#/$defs/website" }]
  }
}
```

Web Assertion のクレームの具体例を次に示します。

```json
{
  "vct": "https://originator-profile.org/website",
  "vct#integrity": "sha256-o2zJ6gYOeJRgHgb05xK94kKKb8SIsBebOzalI0p2Pb4=",
  "iss": "dns:example.com",
  "sub": "78550fa7-f846-4e0f-ad5c-8d34461cb95b",
  "iat": 1680274800,
  "exp": 1743433200,
  "locale": "ja-JP",
  "title": "<Webサイトのタイトル>",
  "description": "<Webサイトの説明>",
  "image": "https://media.example.com/image.png",
  "image#integrity": "sha256-Upwn7gYMuRmJlD1ZivHk876vXHzokXrwXj50VgfnMnY=",
  "allowed_origins": ["https://media.example.com"]
}
```
