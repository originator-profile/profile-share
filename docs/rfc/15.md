# Website Metadata Schema - Editor's Draft

## 概要

本文書では Originator Profile 技術研究組合の開発するアプリケーションで使用されるウェブサイトメタデータの構造を説明します。

## 用語

本文書に説明のない用語については、用語 RFC 文書を参照してください。

- [SD-JWT VC Type Metadata](https://www.ietf.org/archive/id/draft-ietf-oauth-sd-jwt-vc-04.html#name-type-metadata)
- Web Assertion (WA)

## Website Metadata の形式

### クレーム

#### `vct`

必ず `https://originator-profile.org/website` でなければなりません (MUST)。

#### `target`

Web Assertion に登録済みのクレーム。含めてはいけません (MUST NOT) 。

#### `allowed_urls`

Web Assertion に登録済みのクレーム。含めてはいけません (MUST NOT)。

#### `allowed_origins`

REQUIRED. Web Assertion に登録済みのクレーム。

### サブスキーマ

#### `website`

ウェブサイトを表す JSON Object です。JSON Object は次のプロパティを含みます。

- `title`: REQUIRED. コンテンツのタイトル。
- `description`: REQUIRED. コンテンツの説明（プレーンテキスト）。
- `image`: OPTIONAL. コンテンツの画像の URL。コンテンツに強い関連をもつ画像があるならば、その画像を指定するべきです (RECOMMENDED)。
- `image#integrity`: OPTIONAL. コンテンツの画像のハッシュ値を指定します。ハッシュ値の形式は [Subresource Integrity セクション 3.1](https://www.w3.org/TR/SRI/#framework) の Integrity metadata でなければなりません (MUST)。
- `locale`: REQUIRED. Web コンテンツのロケール。

### SD-JWT VC Type Metadata

_本セクションは参考情報です。_

Web Assertion の発行者は、このスキーマを使ってウェブサイト用の Web Assertion を発行することができます (MAY)。
新しいスキーマを定義して、そのスキーマに基づく Web Assertion を発行してもよい (MAY) ですが、そのスキーマも Web Assertion の仕様に準拠している必要があります (MUST)。

SD-JWT VC Type Metadata の具体例を次に示します。

```json
{
  "vct": "https://originator-profile.org/website",
  "title": "Website Metadata",
  "description": "A credential format to describe and assert the website and its reliability and authenticity",
  "schema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Website Metadata",
    "allOf": [
      {
        "title": "Content Assertion",
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "vct": {
            "title": "The type of the Verifiable Credential",
            "type": "string"
          },
          "vct#integrity": {
            "type": "string",
            "description": "ハッシュ値の形式は Subresource Integrity セクション 3.1 の Integrity metadata でなければなりません (MUST)。"
          },
          "iss": {
            "title": "JWT Issuer",
            "type": "string",
            "format": "uri",
            "description": "[RFC7519#section-4.1.1](https://www.rfc-editor.org/rfc/rfc7519#section-4.1.1)"
          },
          "sub": {
            "title": "JWT Subject",
            "type": "string",
            "format": "hostname",
            "description": "[RFC7519#section-4.1.2](https://www.rfc-editor.org/rfc/rfc7519#section-4.1.2)"
          },
          "iat": {
            "title": "JWT Issued At",
            "type": "number",
            "description": "[RFC7519#section-4.1.6](https://www.rfc-editor.org/rfc/rfc7519#section-4.1.6)"
          },
          "exp": {
            "title": "JWT Expiration Time",
            "type": "number",
            "description": "[RFC7519#section-4.1.4](https://www.rfc-editor.org/rfc/rfc7519#section-4.1.4)"
          }
        },
        "required": ["vct", "vct#integrity", "iss", "sub", "iat", "exp"]
      },
      {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "vct": {
            "type": "string",
            "const": "https://originator-profile.org/website"
          },
          "target": {
            "enum": []
          },
          "allowed_urls": {
            "enum": []
          },
          "allowed_origins": {
            "title": "Allowed Origins",
            "type": "array",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "description": "Web Assertion によって表明される情報の対象となる [origin](https://www.rfc-editor.org/rfc/rfc6454#section-7)"
          }
        },
        "required": ["vct", "allowed_origins"]
      },
      {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "title": {
            "type": "string",
            "description": "コンテンツのタイトル。"
          },
          "description": {
            "type": "string",
            "description": "コンテンツの説明（プレーンテキスト）。"
          },
          "image": {
            "type": "string",
            "format": "uri",
            "description": "コンテンツの画像の URL。コンテンツに強い関連をもつ画像があるならば、その画像を指定するべきです (RECOMMENDED)。"
          },
          "image#integrity": {
            "type": "string",
            "description": "コンテンツの画像のハッシュ値を指定します。ハッシュ値の形式は Subresource Integrity セクション 3.1 の Integrity metadata でなければなりません (MUST)。"
          },
          "locale": {
            "type": "string",
            "description": "Web コンテンツのロケール。"
          }
        },
        "required": ["title", "description", "locale"]
      }
    ]
  }
}
```

Web Assertion のクレームの具体例を次に示します。

```json
{
  "vct": "https://originator-profile.org/website",
  "vct#integrity": "sha256-o2zJ6gYOeJRgHgb05xK94kKKb8SIsBebOzalI0p2Pb4=",
  "iss": "dns:example.com",
  "sub": "78550fa7-f846-4e0f-ad5c-8d34461cb95b",
  "iat": 1680274800,
  "exp": 1743433200,
  "locale": "ja-JP",
  "title": "<Webサイトのタイトル>",
  "description": "<Webサイトの説明>",
  "image": "https://media.example.com/image.png",
  "image#integrity": "sha256-Upwn7gYMuRmJlD1ZivHk876vXHzokXrwXj50VgfnMnY=",
  "allowed_origins": ["https://media.example.com"]
}
```
