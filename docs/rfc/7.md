# Organization Metadata Schema - Editor's Draft

## 概要

本文書では Originator Profile 技術研究組合の開発するアプリケーションで使用される組織情報のデータ構造を説明します。

## 範囲

- 本文書は Originator Profile 技術研究組合の開発するアプリケーションで使用される組織情報のデータ構造の参考情報です。
- 認証制度、資格の要件、組織の確認プロセスは本文書の範囲外です。

## 用語

本文書に説明のない用語については、用語 RFC 文書を参照してください。

- [SD-JWT VC Type Metadata](https://www.ietf.org/archive/id/draft-ietf-oauth-sd-jwt-vc-04.html#name-type-metadata)
- Originator Profile (OP)

## Organization Metadata の形式

必ず OP でなければなりません (MUST)。

### クレーム

#### `vct`

必ず `https://originator-profile.org/organization` でなければなりません (MUST)。

#### `issuer`

REQUIRED. OP を発行した `organization` です。

#### `holder`

REQUIRED. OP を保有している `organization` です。

### サブスキーマ

#### `organization`

組織情報を表す JSON Object です。

##### `country`

組織の所在地の国・地域です。
必ず [ISO 3166-1 alpha-2](https://www.iso.org/iso-3166-country-codes.html) 形式でなければなりません (MUST)。

:::note
組織の所在地の国・地域によってプロパティが異なる可能性ありますが、本仕様が書かれた時点では `country` が `JP` （日本）のみ定義しています。
:::

::: note

次のプロパティは検討中です。[コメント - OP レジストリ登録の最低要件(基本情報/確認事項)の定義](https://github.com/originator-profile/profile-governance/issues/20#issuecomment-2177454283)

- `businessCategory`: 事業種目。日本では日本標準産業分類を使用するが、地域別に適切な分類を使用する必要がある。また、分類が有用なケースが未確認。
- _未定義_: 公表している OP 憲章「発信者ポリシー」の URL
- 配下の組織 (部署)、メディア、ブランドを表明するメタデータ [1つの法人 ID に複数の OP ID を発行することを許容する](https://github.com/originator-profile/profile/issues/1444)

:::

#### `description`

説明を表す JSON Object です。 SOP を表示するアプリケーションは、このプロパティを表示するとき、`type` プロパティで指定したフォーマットで `data` プロパティのデータを解釈し表示しなければなりません (MUST)。 `type` プロパティには [media type](https://www.iana.org/assignments/media-types/media-types.xhtml) の一部の値が許可され、`text/plain` でなければなりません (MUST)。他の media type が将来的に許可される可能性があります。

`data` プロパティの文字列の長さは、`type` が `text/plain` の場合 10,000 文字以下でなければなりません (MUST)。レジストリは、 SOP を表示するアプリケーションがこのクレームを表示することを考慮して、長すぎる値には修正を求めることが推奨されます (RECOMMENDED)。

:::note

どのような長さを許容するかについてはガイドラインを発行する予定です。実験・実運用によって適切な上限が見えてきた段階でハードリミットとして仕様に定義します。

参考: [コメント - 組織情報画面のdescription領域における表示位置・順序や記載可能内容の要件定義](https://github.com/originator-profile/profile-governance/issues/27#issuecomment-2181911665)

:::

## SD-JWT VC Type Metadata

_本セクションは参考情報です。_

SD-JWT VC Type Metadata の具体例を次に示します。

```json
{
  "vct": "https://originator-profile.org/organization",
  "title": "Organization Metadata",
  "description": "A credential format to describe and assert the originator of web content and its reliability and authenticity",
  "schema": {
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "title": "Organization Metadata",
    "type": "object",
    "additionalProperties": true,
    "$defs": {
      "description": {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "type": {
            "title": "説明のフォーマット",
            "type": "string",
            "enum": ["text/plain"]
          },
          "data": {
            "title": "説明",
            "type": "string",
            "maxLength": 10000
          }
        }
      },
      "organizationJP": {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "domain_name": {
            "title": "ドメイン名 (RFC 4501)",
            "type": "string"
          },
          "url": {
            "title": "ウェブサイトのURL",
            "type": "string"
          },
          "logo": {
            "title": "ロゴ画像URL",
            "type": "string"
          },
          "logo#integrity": {
            "title": "Integrity Metadata",
            "description": "https://www.w3.org/TR/SRI/#framework",
            "type": "string"
          },
          "country": {
            "title": "国",
            "type": "string",
            "description": "ISO 3166-1 alpha-2",
            "enum": ["JP"]
          },
          "name": {
            "title": "法人名",
            "type": "string"
          },
          "description": {
            "$ref": "#/$defs/description"
          },
          "corporate_number": {
            "title": "法人番号",
            "type": "string"
          },
          "email": {
            "title": "メールアドレス",
            "type": "string"
          },
          "phone_number": {
            "title": "電話番号",
            "type": "string"
          },
          "postal_code": {
            "title": "郵便番号",
            "type": "string"
          },
          "region": {
            "title": "都道府県",
            "type": "string"
          },
          "locality": {
            "title": "市区町村",
            "type": "string"
          },
          "street_address": {
            "title": "丁目番地など",
            "type": "string"
          },
          "contact_title": {
            "title": "連絡先表示名",
            "type": "string"
          },
          "contact_url": {
            "title": "連絡先URL",
            "type": "string"
          },
          "privacy_policy_title": {
            "title": "プライバシーポリシー表示名",
            "type": "string"
          },
          "privacy_policy_url": {
            "title": "プライバシーポリシーURL",
            "type": "string"
          },
          "publishing_principle_title": {
            "title": "編集ガイドライン表示名",
            "type": "string"
          },
          "publishing_principle_url": {
            "title": "編集ガイドラインURL",
            "type": "string"
          }
        },
        "required": [
          "domain_name",
          "url",
          "country",
          "name",
          "corporate_number"
        ]
      },
      "organization": {
        "oneOf": [{ "$ref": "#/$defs/organizationJP" }]
      }
    },
    "properties": {
      "locale": {
        "title": "ロケール",
        "description": "Unicode CLDR locale identifier",
        "type": "string"
      },
      "jwks": {
        "type": "object",
        "title": "発行者の公開鍵の JSON Web Key Set"
      },
      "issuer": {
        "$ref": "#/$defs/organization"
      },
      "holder": {
        "$ref": "#/$defs/organization"
      }
    },
    "required": ["locale", "jwks", "issuer", "holder"]
  }
}
```

Originator Profile のクレームの具体例を次に示します。

```json
{
  "vct": "https://example.org/originator_profile",
  "vct#integrity": "sha256-o2zJ6gYOeJRgHgb05xK94kKKb8SIsBebOzalI0p2Pb4=",
  "iss": "https://example.org",
  "iss#integrity": "sha256-Vfeaz5AVsHE9XSJ+aDikjlQUl2FpXPKc5vh0VjMssBA=",
  "jwks": {
    "keys": [
      {
        "crv": "P-256",
        "kty": "EC",
        "x": "oXjYmCzMVb8ZAWYM2s0LqlzCA4AubxfwDEDdySrtf_o",
        "y": "Tx96jtb9W0_na6FohYNKVe-7S1h2oHtxXVDV1PQWQ-4"
      }
    ]
  },
  "iat": 1680274800,
  "exp": 1743433200,
  "sub": "example.jp",
  "locale": "ja-JP",
  "issuer": {
    "domain_name": "example.org",
    "url": "https://example.org/",
    "country": "JP",
    "name": "技術研究組合 (※開発用サンプル)",
    "logo": "https://example.org/image/icon.svg",
    "logo#integrity": "sha256-RB6bmjh+ge8+foSHzPMTMJmKjX/dwtmpCB9i/G79cdU=",
    "email": "sample@example.org",
    "phone_number": "00-0000-0000",
    "corporate_number": "8010005035933",
    "postal_code": "000-0000",
    "region": "東京都",
    "locality": "千代田区",
    "street_address": "○○○",
    "contact_title": "お問い合わせ",
    "contact_url": "https://example.org/contact",
    "privacy_policy_title": "プライバシーポリシー",
    "privacy_policy_url": "https://example.org/privacy",
    "description": {
      "type": "text/plain",
      "data": "この文章はこの組織に関する補足情報です。"
    }
  },
  "holder": {
    "domain_name": "example.jp",
    "url": "https://example.jp/",
    "country": "JP",
    "name": "○○新聞社 (※開発用サンプル)",
    "logo": "https://example.jp/image/icon.svg",
    "logo#integrity": "sha256-RB6bmjh+ge8+foSHzPMTMJmKjX/dwtmpCB9i/G79cdU=",
    "corporate_number": "0000000000000",
    "postal_code": "000-0000",
    "region": "東京都",
    "locality": "千代田区",
    "street_address": "○○○",
    "contact_title": "お問い合わせ",
    "contact_url": "https://example.jp/contact",
    "privacy_policy_title": "プライバシーポリシー",
    "privacy_policy_url": "https://example.jp/privacy",
    "publishing_principle_title": "新聞倫理綱領",
    "publishing_principle_url": "https://example.jp/statement",
    "description": {
      "type": "text/plain",
      "data": "この文章はこの組織に関する補足情報です。"
    }
  }
}
```

:::note
本文書では外部参照リソースの `#integrity` クレームについて、アプリケーションのユースケース次第であるため任意 (OPTIONAL) としています。
しかし Originator Profile 技術研究組合のアプリケーションの実装ではデータの完全性を保つ目的でこれらのクレーム含めることを必須 (REQUIRED) とします。

- `logo#integrity`

:::
